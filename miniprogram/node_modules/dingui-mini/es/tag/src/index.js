"use strict";

Component({
  mixins: [],
  data: {
    $uiName: 'tag',
    checked: false,
    closed: false
  },
  props: {
    className: '',
    text: '',
    type: 'blue',
    //blue,red,green,orange,darkblue,gray,darkgray,darkorange,darkred
    size: 'small',
    //large,small
    closable: false,
    data: null,
    autoChecked: false,
    checked: false,
    onDmTap: function onDmTap() {},
    onDmChange: function onDmChange() {},
    onDmClose: function onDmClose() {}
  },
  didMount: function didMount() {
    this.setData({
      checked: this.props.checked
    });
  },
  didUpdate: function didUpdate(prevProps) {
    if (prevProps.checked !== this.props.checked) {
      this.setData({
        checked: this.props.checked
      });
    }
  },
  didUnmount: function didUnmount() {},
  methods: {
    onDmTap: function onDmTap(e) {
      var _this = this;

      if (this.props.autoChecked && !this.data.closed) {
        this.setData({
          checked: !this.data.checked
        }, function () {
          _this.props.onDmChange(_this.data.checked, _this.props.data);
        });
      }

      this.props.onDmTap(e, this);
    },
    onDmClose: function onDmClose(e) {
      var _this2 = this;

      if (this.props.closable) {
        this.setData({
          closed: true
        }, function () {
          if (_this2.props.autoChecked) {
            _this2.props.onDmChange(false, _this2.props.data);
          }

          _this2.props.onDmClose(_this2.props.data);
        });
      }
    }
  }
});