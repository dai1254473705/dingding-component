!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.validateConfig=t():e.validateConfig=t()}(global,(function(){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(e,t){e.exports=require("lodash")},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=[{name:"pluginComponentName",dataType:"string",guide:"pluginComponentName 是组件的唯一标志，不能为空"},{name:"name",dataType:"string",guide:'name 是组件的展示名，如"业务报表"、"云社区"'},{name:"setters",dataType:"array",validate:n.a.isArray,guide:"setters 是设计器中的配置面板，如确实不需要，可以设为 []"},{name:"props",dataType:"object",guide:"setters 中propName 对应的默认值集合，如没有配置setters，可以设为 {}"},{name:"previewUrl",dataType:"string",validate:function(e){return!n.a.isEmpty(e)},guide:"previewUrl 是自定义组件预览图的CDN地址，宽度为375px"},{name:"previewHeight",dataType:"number",guide:"previewHeight 是自定义组件预览图的高度，即previewUrl图片的高度，单位默认为px"}],i=[{setterName:"Input",dataType:["string"]},{setterName:"InputNumber",dataType:["number"]},{setterName:"Select",dataType:["string","number"]},{setterName:"Switch",dataType:["boolean"]},{setterName:"ColorSetter",dataType:["string"]},{setterName:"SubPage",dataType:["string"]},{setterName:"UploadImgSetter",dataType:["string"]},{setterName:"SelectApiSetter",dataType:["object"]},{setterName:"SliderSetter",dataType:["number"]}],p=function(){return(p=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},u={count:0,pass:!1,data:{}},s="";function f(e,t){s=e,u.data[e]=[],t(),s=""}function d(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];u.data[s].push({code:e,info:t.join("\n")})}var c={E001:"E001",E002:"E002",E003:"E003",E004:"E004",E005:"E005",E006:"E006",E007:"E007",E008:"E008",E009:"E009",E010:"E010",E011:"E011",E019:"E019",E012:"E012",E013:"E013",E014:"E014",E015:"E015",E016:"E016",E017:"E017",E018:"E018",E020:"E020",E021:"E021",E022:"E022",E023:"E023",E024:"E024",E025:"E025"};function m(e){var t,a=function(e){try{return JSON.parse(e)}catch(e){return f("检查JSON格式",(function(){d(c.E001,"不是合法的JSON字符串",JSON.stringify(e))})),null}}(e);return a&&(function(e){f("检查config.json格式完整性",(function(){n.a.forEach(o,(function(t){n.a.isUndefined(e[t.name])?d(c.E002,t.name+" 为必填项，但不存在。"+t.guide):n.a.isFunction(t.validate)?t.validate(e[t.name])||d(c.E003,t.name+" 的数据类型应该是 "+t.dataType+"，值不能为空"):typeof e[t.name]!==t.dataType&&d(c.E004,t.name+" 的数据类型应该是 "+t.dataType)})),function(e){var t=["dataSource","prop","setter"];n.a.forIn(e,(function(e,a){-1!==t.indexOf(a)&&d(c.E024,a+"不是合法的key，应该是"+a+"s")}))}(e)}))}(a),function(e){f("检查previewUrl",(function(){var t=e.previewUrl;t&&!/^https?/.test(t)&&d(c.E005,"previewUrl 必须是个http或https开头的链接地址")}))}(a),function(e){f("检查setters",(function(){var t=[];n.a.forEach(e.setters,(function(a,r){var o="第"+r+"个setter ";a.propName&&"string"==typeof a.propName||d(c.E006,o+"propName不存在，或不是字符串"),-1===n.a.map(i,"setterName").indexOf(a.setterName)&&d(c.E007,o+"setterName 不是合法的setterName");var p=n.a.get(a,"props.label");p&&"string"==typeof p||d(c.E008,o+"props.label没有配置，或不是字符串"),function(e,t){var a=n.a.get(e,"props.options");switch(e.setterName){case"SliderSetter":var r=n.a.get(e,"props.min"),o=n.a.get(e,"props.max");"number"!=typeof r||"number"!=typeof o?d(c.E012,t+"SliderSetter 需要配置min和max，并且都需要是number"):r>=o&&d(c.E013,t+"SliderSetter min不能大于max");break;case"Select":n.a.get(e,"props.apiKey")||function(e,t,a,r){if(!n.a.isArray(e))return void d(c.E014,t+"setterName为"+r+"时，需要有options");n.a.every(e,(function(e){return"string"==typeof e.title&&-1!==a.indexOf(typeof e.value)}))||d(c.E015,t+"的props.option 配置错误，每个option需要有title和value，value数据类型为"+a.join("、"))}(a,t,["string","number"],"Select")}}(a,o),-1!==t.indexOf(a.propName)?d(c.E009,o+"propName与其他setter中的propName重复"):t.push(a.propName),n.a.isUndefined(a.hidden)||function(e,t,a){if(!n.a.isArray(e.hidden))return void d(c.E010,t+"hidden格式需要是array");var r=n.a.map(a,"propName");n.a.forEach(e.hidden,(function(e,a){var n="string"==typeof e.propName&&-1!==["string","boolean","number"].indexOf(typeof e.value),o=""!==e.propName;n&&o||d(c.E011,t+"hidden的第"+a+"项配置错误，propName不是字符串，或value的数据结构错误"),-1===r.indexOf(e.propName)&&d(c.E019,t+"hidden的第"+a+"项配置错误，propName不存在")}))}(a,o,e.setters)}))}))}(a),function(e){f("检查dataSources",(function(){var t=e.dataSources;if(t){if(!n.a.isArray(t))return void d(c.E020,"dataSources 的数据类型为数组");n.a.forEach(t,(function(t,a){var r=t.propName,o=t.apiKey;r&&"string"==typeof r||d(c.E021,"dataSources 第"+a+"项的 propName 不能为空，且数据类型应该为字符串"),o&&"string"==typeof o||d(c.E022,"dataSources 第"+a+"项的 apiKey 不能为空，且数据类型应该为字符串"),-1!==n.a.map(e.setters,"propName").indexOf(r)&&d(c.E023,"dataSources 第"+a+"项的 propName 与 setters 中定义的 propName 冲突")}))}}))}(a),function(e){f("检查props",(function(){var t=e.setters,a=e.props||{};n.a.forEach(t,(function(e){var t=e.propName,r=a[t];if(n.a.isUndefined(r))d(c.E016,t+" 没有定义默认值");else{var o=e.setterName,p=n.a.find(i,{setterName:o}),u=n.a.get(p,"dataType",[]);-1===u.indexOf(typeof r)&&d(c.E017,t+" 的默认值数据类型与setterName需要的数据类型不一致，期望为"+u.join("、")+"，但实际为"+typeof r),"SelectApiSetter"===o&&(n.a.isEqual(r,{})||d(c.E018,t+" 是数据源，默认值必须是 {}"))}})),n.a.forEach(n.a.map(e.dataSources,"propName"),(function(e){n.a.isUndefined(a[e])||n.a.isEqual(a[e],{})||d(c.E018,e+" 是数据源，默认值必须是 {}")}));var r=n.a.map(t,"propName").concat(n.a.map(e.dataSources,"propName")),o=n.a.keys(a),p=n.a.difference(o,r);n.a.forEach(p,(function(e){d(c.E025,e+" 既不存在于setters中，也不存在于dataSources中，是多余的请删除")}))}))}(a)),t=0,n.a.forEach(u.data,(function(e){t+=e.length})),p(p({},u),{count:t,pass:0===t})}a.d(t,"default",(function(){return m}))}]).default}));
